<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client Profile Management</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">
    <style>
        body {
            background-color: #87CEEB;
            /* Soft pleasant sky blue background color */
        }

        .user_card {
            width: 400px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f7f7f7;
            border-radius: 10px;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
        }

        .form-title {
            text-align: center;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .login_btn {
            width: 100%;
            background-color: #33ccff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .login_btn:focus {
            box-shadow: none;
            outline: none;
        }

        .error-message {
            color: red;
            margin-top: 5px;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="user_card">
                    <h3 class="form-title">Client Profile Management</h3>
                    <form id="profile_form" method="POST" action="">
                        {% csrf_token %}
                        <div class="form-group">
                            <label for="full_name">Full Name:</label>
                            <input type="text" class="form-control" id="full_name" name="full_name" maxlength="50"
                                required>
                        </div>
                        <div class="form-group">
                            <label for="address1">Address Line 1:</label>
                            <input type="text" class="form-control" id="address1" name="address1" maxlength="100"
                                required>
                        </div>
                        <div class="form-group">
                            <label for="address2">Address Line 2:</label>
                            <input type="text" class="form-control" id="address2" name="address2" maxlength="100">
                        </div>
                        <div class="form-group">
                            <label for="city">City:</label>
                            <input type="text" class="form-control" id="city" name="city" maxlength="100" required>
                        </div>
                        <div class="form-group">
                            <label for="state">State:</label>
                            <select class="form-control" id="state" name="state" required>
                                <option value="">Select State</option>
                                <!-- Add options for all states -->
                                <script>
                                    // Array of US states with their abbreviations
                                    var usStates = [
                                        { name: 'ALABAMA', abbreviation: 'AL' },
                                        { name: 'ALASKA', abbreviation: 'AK' },
                                        { name: 'AMERICAN SAMOA', abbreviation: 'AS' },
                                        { name: 'ARIZONA', abbreviation: 'AZ' },
                                        { name: 'ARKANSAS', abbreviation: 'AR' },
                                        { name: 'CALIFORNIA', abbreviation: 'CA' },
                                        { name: 'COLORADO', abbreviation: 'CO' },
                                        { name: 'CONNECTICUT', abbreviation: 'CT' },
                                        { name: 'DELAWARE', abbreviation: 'DE' },
                                        { name: 'DISTRICT OF COLUMBIA', abbreviation: 'DC' },
                                        { name: 'FEDERATED STATES OF MICRONESIA', abbreviation: 'FM' },
                                        { name: 'FLORIDA', abbreviation: 'FL' },
                                        { name: 'GEORGIA', abbreviation: 'GA' },
                                        { name: 'GUAM', abbreviation: 'GU' },
                                        { name: 'HAWAII', abbreviation: 'HI' },
                                        { name: 'IDAHO', abbreviation: 'ID' },
                                        { name: 'ILLINOIS', abbreviation: 'IL' },
                                        { name: 'INDIANA', abbreviation: 'IN' },
                                        { name: 'IOWA', abbreviation: 'IA' },
                                        { name: 'KANSAS', abbreviation: 'KS' },
                                        { name: 'KENTUCKY', abbreviation: 'KY' },
                                        { name: 'LOUISIANA', abbreviation: 'LA' },
                                        { name: 'MAINE', abbreviation: 'ME' },
                                        { name: 'MARSHALL ISLANDS', abbreviation: 'MH' },
                                        { name: 'MARYLAND', abbreviation: 'MD' },
                                        { name: 'MASSACHUSETTS', abbreviation: 'MA' },
                                        { name: 'MICHIGAN', abbreviation: 'MI' },
                                        { name: 'MINNESOTA', abbreviation: 'MN' },
                                        { name: 'MISSISSIPPI', abbreviation: 'MS' },
                                        { name: 'MISSOURI', abbreviation: 'MO' },
                                        { name: 'MONTANA', abbreviation: 'MT' },
                                        { name: 'NEBRASKA', abbreviation: 'NE' },
                                        { name: 'NEVADA', abbreviation: 'NV' },
                                        { name: 'NEW HAMPSHIRE', abbreviation: 'NH' },
                                        { name: 'NEW JERSEY', abbreviation: 'NJ' },
                                        { name: 'NEW MEXICO', abbreviation: 'NM' },
                                        { name: 'NEW YORK', abbreviation: 'NY' },
                                        { name: 'NORTH CAROLINA', abbreviation: 'NC' },
                                        { name: 'NORTH DAKOTA', abbreviation: 'ND' },
                                        { name: 'NORTHERN MARIANA ISLANDS', abbreviation: 'MP' },
                                        { name: 'OHIO', abbreviation: 'OH' },
                                        { name: 'OKLAHOMA', abbreviation: 'OK' },
                                        { name: 'OREGON', abbreviation: 'OR' },
                                        { name: 'PALAU', abbreviation: 'PW' },
                                        { name: 'PENNSYLVANIA', abbreviation: 'PA' },
                                        { name: 'PUERTO RICO', abbreviation: 'PR' },
                                        { name: 'RHODE ISLAND', abbreviation: 'RI' },
                                        { name: 'SOUTH CAROLINA', abbreviation: 'SC' },
                                        { name: 'SOUTH DAKOTA', abbreviation: 'SD' },
                                        { name: 'TENNESSEE', abbreviation: 'TN' },
                                        { name: 'TEXAS', abbreviation: 'TX' },
                                        { name: 'UTAH', abbreviation: 'UT' },
                                        { name: 'VERMONT', abbreviation: 'VT' },
                                        { name: 'VIRGIN ISLANDS', abbreviation: 'VI' },
                                        { name: 'VIRGINIA', abbreviation: 'VA' },
                                        { name: 'WASHINGTON', abbreviation: 'WA' },
                                        { name: 'WEST VIRGINIA', abbreviation: 'WV' },
                                        { name: 'WISCONSIN', abbreviation: 'WI' },
                                        { name: 'WYOMING', abbreviation: 'WY' }
                                    ];

                                    // Append options to select element
                                    usStates.forEach(function (state) {
                                        $('#state').append('<option value="' + state.abbreviation + '">' + state.name + '</option>');
                                    });
                                </script>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="zipcode">Zipcode:</label>
                            <input type="text" class="form-control" id="zipcode" name="zipcode" maxlength="9"
                                minlength="5" required>
                        </div>
                        <button type="submit" class="btn login_btn">Save Profile</button>
                    </form>
                    <div class="error-message"></div>
                    <div class="mt-4 text-center">
                        <a href="{% url 'login' %}" class="btn btn-link">Back to login</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        $(document).ready(function () {
            // Form submission
            $('#profile_form').submit(function (event) {
                event.preventDefault();
                // Validate form fields
                var valid = validateForm();
                if (valid) {
                    // Submit the form
                    $('.error-message').append('<p>Success</p>');
                    this.submit();
                }
            });

            // Function to validate form fields
            function validateForm() {
                var isValid = true;
                $('.error-message').empty();

                // Full Name validation
                var fullName = $('#full_name').val();
                if (fullName.length > 50) {
                    $('#full_name').addClass('is-invalid');
                    $('.error-message').append('<p>Full Name cannot exceed 50 characters</p>');
                    isValid = false;
                }

                // Address Line 1 validation
                var address1 = $('#address1').val();
                if (address1.length > 100) {
                    $('#address1').addClass('is-invalid');
                    $('.error-message').append('<p>Address Line 1 cannot exceed 100 characters</p>');
                    isValid = false;
                }

                // Address Line 2 validation (optional)

                // City validation
                var city = $('#city').val();
                if (city.length > 100) {
                    $('#city').addClass('is-invalid');
                    $('.error-message').append('<p>City cannot exceed 100 characters</p>');
                    isValid = false;
                }

                // State validation
                var state = $('#state').val();
                if (state === "") {
                    $('#state').addClass('is-invalid');
                    $('.error-message').append('<p>Please select a State</p>');
                    isValid = false;
                }

                // Zipcode validation
                var zipcode = $('#zipcode').val();
                if (zipcode.length < 5 || zipcode.length > 9) {
                    $('#zipcode').addClass('is-invalid');
                    $('.error-message').append('<p>Zipcode should be between 5 to 9 characters</p>');
                    isValid = false;
                }

                return isValid;
            }
        });
    </script>
</body>

</html>